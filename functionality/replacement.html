<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Replacement Operation - Ks-Sdk Help document</title>
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="../favicon.svg">
        
        
        <link rel="shortcut icon" href="../favicon.png">
        
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        
        <link rel="stylesheet" href="../css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="../fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../dsl.html"><strong aria-hidden="true">2.</strong> DSL Description</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../dsl/camera.html"><strong aria-hidden="true">2.1.</strong> Camera</a></li><li class="chapter-item expanded "><a href="../dsl/light.html"><strong aria-hidden="true">2.2.</strong> Light</a></li><li class="chapter-item expanded "><a href="../dsl/instance.html"><strong aria-hidden="true">2.3.</strong> Instance</a></li></ol></li><li class="chapter-item expanded "><a href="../dsl_run_and_debug.html"><strong aria-hidden="true">3.</strong> DSL Run and Debug</a></li><li class="chapter-item expanded "><a href="../functionality.html"><strong aria-hidden="true">4.</strong> Function List</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../functionality/entity_operations.html"><strong aria-hidden="true">4.1.</strong> Entity Operations</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../functionality/camera_operations.html"><strong aria-hidden="true">4.1.1.</strong> Camera Operations</a></li><li class="chapter-item expanded "><a href="../functionality/cc_instance_operations.html"><strong aria-hidden="true">4.1.2.</strong> Instance Operations</a></li><li class="chapter-item expanded "><a href="../functionality/light_operations.html"><strong aria-hidden="true">4.1.3.</strong> Lighting Operations</a></li></ol></li><li class="chapter-item expanded "><a href="../functionality/layout_operations.html"><strong aria-hidden="true">4.2.</strong> Layout Operations</a></li><li class="chapter-item expanded "><a href="../functionality/replacement.html" class="active"><strong aria-hidden="true">4.3.</strong> Replacement Operation</a></li><li class="chapter-item expanded "><a href="../functionality/image.html"><strong aria-hidden="true">4.4.</strong> Image Operation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../functionality/noise.html"><strong aria-hidden="true">4.4.1.</strong> Noise Simulation</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Ks-Sdk Help document</h1>

                    <div class="right-buttons">
                        
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#randomly-replace-materials" id="randomly-replace-materials">Randomly replace materials</a></h1>
<p><strong>command_type value: material_replace</strong></p>
<p>Requirements and background:</p>
<p>The main logic is a function that implements three related functions:</p>
<ol>
<li>Enter CCInstance to randomly replace the material corresponding to each part (each part is sampled separately from the preset material library).</li>
<li>Enter CCInstance and the designated material category, and randomly replace the material of each part to the material of the corresponding material category. (Each part is sampled separately from the designated category of the preset material library)</li>
<li>Enter the CCInstance and the specified material id list, and randomly replace the material of each part to the material in the list.</li>
</ol>
<h2><a class="header" href="#parameter-list" id="parameter-list">parameter list</a></h2>
<table><thead><tr><th align="left">First name</th><th align="left">Required or not</th><th align="left">Value</th><th align="left">Remarks</th></tr></thead><tbody>
<tr><td align="left">id</td><td align="left">Yes</td><td align="left">String</td><td align="left">Identifies the CCInstance to be modified</td></tr>
<tr><td align="left">type</td><td align="left">yes</td><td align="left">REPLACE_ALL | REPLACE_BY_CATEGORY | REPLACE_TO_GIVEN_LIST</td><td align="left">replacement type</td></tr>
<tr><td align="left">category</td><td align="left">Required when type=REPLACE_BY_CATEGORY</td><td align="left">String</td><td align="left">Category name to be replaced</td></tr>
<tr><td align="left">ids</td><td align="left">type=REPLACE_TO_GIVEN_LIST Required when</td><td align="left">List of String</td><td align="left">ID list to be replaced</td></tr>
</tbody></table>
<p>example</p>
<pre><code class="language-python">class ReplaceMaterial(EntityProcessor):
    def process(self, *args, **kwargs):
        for instance in self.shader.world.instances:
            self.shader.world.replace_material(
                id=instance.id,
                type='REPLACE_BY_CATEGORY',
                category='METAL'
            )
</code></pre>
<h1><a class="header" href="#randomly-replace-the-parameter-list-of-the-model" id="randomly-replace-the-parameter-list-of-the-model">Randomly replace the parameter list of the model</a></h1>
<p><strong>command_type value: model_replace</strong></p>
<h2><a class="header" href="#needs-and-background" id="needs-and-background">Needs and background</a></h2>
<p>The main function is: input a CCInstance and randomly select a label with the same label from our preset model library to replace the CCInstance.</p>
<p>Random replacement is valid for a given CCInstance (type=Asset only takes effect), other types of CCInstance may be ignored or an error may be reported. Then there are currently the following constraints (this part of the constraints can be gradually released with subsequent function development):</p>
<ol>
<li>The size of the furniture before and after the replacement is kept the same (aligned by the scale parameter)</li>
<li>A furniture library needs to be preset, and only the model in the preset furniture library will be replaced. (This logic will be used as a bottom-up logic to ensure the robustness of the service)
<ol>
<li>Models whose categories are not in the preset furniture library cannot be replaced.</li>
</ol>
</li>
</ol>
<h2><a class="header" href="#parameter-list-1" id="parameter-list-1">parameter list</a></h2>
<table><thead><tr><th align="left">First name</th><th align="left">Required or not</th><th align="left">Value</th><th align="left">Remarks</th></tr></thead><tbody>
<tr><td align="left">id</td><td align="left">Yes</td><td align="left">String</td><td align="left">Identifies the CCInstance to be replaced</td></tr>
</tbody></table>
<p>example:</p>
<pre><code class="language-python">class ReplaceModel(EntityProcessor):
    def process(self, *args, **kwargs):
        for instance in self.shader.world.instances:
            self.shader.world.replace_model(
                id=instance.id
            )
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../functionality/layout_operations.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../functionality/image.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a rel="prev" href="../functionality/layout_operations.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="../functionality/image.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        

    </body>
</html>
